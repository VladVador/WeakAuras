--- WeakAura Strings ---
d0eataGir0LiQgfiofiTkIG8krjHzPGBbQSlqvdJi5ysLLbvEMOettQIRjkSnIqFdqIXrKQENOKQ5jkj19ikdKiO6GqAHas6HIQAIakxuuQnkQ8rLKtkvLvcrVusntIuUPOKYojI(PuLAOaSuIapvjMkeUQOOTseu(ku1BjyUkPCxcTxO8xsnyQdRIfdO6XQ0KvvxwyZGYNLQQrROoTeRgqQxljZgOBRi7wK(TcnCLuTCL65sz6KCDry7svsFxusY4beNxvwVOKO3lvjMVOk3Niv2pASomeyltylFSLpgcSfyJPQLswzGjjoCylaP3WG1cfMKsStkSLFPTo45HiaIcBr(fB5MOPgNqearHTalr6vvgtHaLiPPPPlWOXJQrd18RPRl3Q4RbaEEXM(K(PxfkeLPacu4WJQrd18RPRl3Q4RbaEEXwOtuaNiDwTmAjkfTAosjsAAAAAAA6cmA8OA0qn)A66YTk(AaGNxSfWjk0jsltgTu0Q5iLiPPPPPPPPPPPP3HkXoLg24E6OGKeI8o4HbLoVBUCYB01LBv8toqVkuiktbeOWHhvJgQ5xtxxUvXxda88ITqNOaoXbA8OA0qn)A66YTk(AaGNxSf6ef6eHsK00000000bylkWOXJQrd18RPRl3Q4RbaEEXwilIcDI0YKrlfTAosjsAAAAAAAAAAA6DOsStPHnUNokijHiVdEyqPZ7MlN8gDD5wf)1sHiVdEyqPZ7MlN8gDD5wf)Kd0RcfIYuabkC4r1OHA(101LBv81aapVylGtuaN4anEunAOMFnDD5wfFnaWZl2c4ef6ehOxfkeLPacu4WJQrd18RPRl3Q4RbaEEXwOtuaN4anEunAOMFnDD5wfFnaWZl2cDIcDIqjsAAAAAAA6aSffy04r1OHA(101LBv81aapVyl0JOqNiTmz0srRMJuIKMMMMMMMMMMMEhQe7uAyJ7PJcssiY7Ghgu68U5YjVrxxUvXFTuiY7Ghgu68U5YjVrxxUvXFTuiY7Ghgu68U5YjVrxxUvXp5a9QqHOmfqGchEunAOMFnDD5wfFnaWZl2czruaN4anEunAOMFnDD5wfFnaWZl2czruOtCGEvOquMciqHdpQgnuZVMUUCRIVga45fBbCIc4ehOXJQrd18RPRl3Q4RbaEEXwaNOqN4a9QqHOmfqGchEunAOMFnDD5wfFnaWZl2cDIc4ehOXJQrd18RPRl3Q4RbaEEXwOtuOtekrsttttttthGTOaJgpQgnuZVMUUCRIVga45fBHmef6ePLjJwkA1CKsK0000000000007qLyNsdBCpDuqscrEh8WGsN3nxo5n66YTk(RLcrEh8WGsN3nxo5n66YTk(RLcrEh8WGsN3nxo5n66YTk(RLcrEh8WGsN3nxo5n66YTk(jhOxfkeLPacu4WJQrd18RPRl3Q4RbaEEXwOhrbCId04r1OHA(101LBv81aapVyl0JOqN4a9QqHOmfqGchEunAOMFnDD5wfFnaWZl2czruaN4anEunAOMFnDD5wfFnaWZl2czruOtCGEvOquMciqHdpQgnuZVMUUCRIVga45fBbCIc4ehOXJQrd18RPRl3Q4RbaEEXwaNOqN4a9QqHOmfqGchEunAOMFnDD5wfFnaWZl2cDIc4ehOXJQrd18RPRl3Q4RbaEEXwOtuOtekrsttttttthGTGiPPPPPPPPPPPP3HkXoLg24E6OGKeI8o4HbLoVBUCYB01LBv8xlfI8o4HbLoVBUCYB01LBv8xlfI8o4HbLoVBUCYB01LBv8xlfI8o4HbLoVBUCYB01LBv8xlfI8o4HbLoVBUCYB01LBv8toqVkuiktbeOWHhvJgQ5xtxxUvXxda88ITqgIc4ehOXJQrd18RPRl3Q4RbaEEXwidrHoXb6vHcrzkGafo8OA0qn)A66YTk(AaGNxSf6ruaN4anEunAOMFnDD5wfFnaWZl2c9ik0joqVkuiktbeOWHhvJgQ5xtxxUvXxda88ITqwefWjoqJhvJgQ5xtxxUvXxda88ITqwef6ehOxfkeLPacu4WJQrd18RPRl3Q4RbaEEXwaNOaoXbA8OA0qn)A66YTk(AaGNxSfWjk0joqVkuiktbeOWHhvJgQ5xtxxUvXxda88ITqNOaoXbA8OA0qn)A66YTk(AaGNxSf6ef6eHsK00000000r6NiPPPPdWwqK00000000GJ3diD2a5mToyG4aCWGwgDVKuYZu0LCGoPKNPaxYb6KsEMISKCGoPKNPONKd0jL8mfzKu6Y6ejnnnnnnn9ouj2P0Wg3thfKKYB01LBv8xlvEJUUCRI)APYB01LBv8xlvEJUUCRI)APYB01LBv8toqNnqotRdgioahme6ehOZgiNP1bdehGdgc4ehOZgiNP1bdehGdgczrCGoBGCMwhmqCaoyi0J4aD2a5mToyG4aCWqidrOejnnnDK(jYi9JT86nmyTqHjjCsVuyl7O)YykI36b2IkaIcBPKwu67406GHk(ys2HTa0jAQcSh2s(zljISLaSLwacdWyjvHTau7nce9oRjTSZHaBrTl93FSXqGTOERhyl3en14e2YnrtnoPvV1dSLOxJuf2YpX(OkJPylDzGTCt0uJtsEMcSf4GRVuvS3jwxfFAG)Ord18RrlHtNnyI0aB5MOPgNWwGLi9QkJPq0d6HPO1o9hd6b9qBmX(gsEMIb9GE4hn1Qm7dyqjsAAA6cm6PO1o9h0YKrNCbq2stA6(Ker2sGeKjaejPpPFAi)OPwLzFaJwMm6mtlQvz2hWGKe24nrlju6XnnKF0uRYSpGrltgDMPf1Qm7dyqsUo45fB1z3FOscL(K(PHKzArTkZ(agKKWgVjAjHsltgDAbKECtNzAr1xl3UePFijxh88IDYb6KWgVjAjHsltgTANiGcfkTAosjsAAAAAAAAIKMMMMMMMUaJgpQgnuZVMUUCRIVwANMAvM9bmAzYOtlG0JBA8OA0qn)A66YTk(APDAQvz2hWOzEYO)rtTkZ(agTAosjsAAAAAAAAAAAA8OA0qn)A66YTk(AaGNxSPLr3lshrstttttttttttdBCtxK1nKb9FKiPPPPPPPPPPPPPPPPXJQrd18RPRl3Q4RbaEEXwOislJUxKoIKMMMMMMMMMMMMMMMg24MgOL1nGJ(psK000000000000000000004r1OHA(101LBv81aapVyluefaArAz0srK0000000000000000r6NiPPPPPPPPPPPPJ0prsttttttthPFIKMMMMMMMgpQgnuZVMUUCRIVwANMAvM9bmAz0)OPwLzFaJiPPPPPPPPjsAAAAAAAAyJB6ISmgWnaxh9FKiPPPPPPPPPPPPHnUPbAz4g6gGRJ(psK00000000000000004r1OHA(101LBv81aapVyluefaArAz04r1OHA(101LBv81aapVyluGRtuaOfjsAAAAAAAAAAA6i9tK00000000r6NiPPPPPPPPjsAAAAAAAAWX7bKga45f78bpTw(JGJBIKMMMMMMMUaJoZ0IkBGuAQgK2yI9nK8mfqPLjJwTte0Q5iLiPPPPPPPPPPPPbaEEXoFWtRL)i44MwgTeG2hW05ln0LfD(9wA9wcweAbyCvqWnKzArLp4P1G0gtSVHKNPakurIKMMMMMMMoaBbrstttttttttttda88ID(GNwl)rWXnTm6EztlJwk4ZqkCd09tlJwk4ZqkCd0aNwgTuWNHu4KoIKMMMMMMMos)ejnnnnnnnnEunAOMFnDD5wfFnaWZl2cDIc4ePLrVkuiktbeOejnnnnnnnn449asNEMcAz0TXe3qYZuqFs)0n1UK2p893saCiTXe3qYZumqNuoCcu6YtmRi5aDYKqPh30TXe7Bi5zkY6ejnnnnnnnnEunAOMFnDD5wfFnaWZl2cDIcDI0YOHnUNokijLlfoGixkCarUu4aI8wE7Kd0aapVyNp4P1YFeCCd)wcHlJmgObaEEXoFWtRL)i44g((Lq4YiJbAaGNxSZh80A5pcoUHh4siCzKXaD6zkGsK000000007qLyNsR2jcIKMMMos)ejnnn9ouj2P0WoGTGiJ0p2s0RrQQHTKFVZAavueAP17v6SLWYwse6mLmxFsdr2sq2adB5MOPgN0ZLFGTOktXhtHTu(yl4r1OHA(101LBv8XwYQkF1mwUmKOe7rIsFp90tw6ak4KEj2dgm46jdSL0eti2L(7p2nmj7WwMJs)ZkSCafGspsLHe7rkPaksHtIsu6LEmyW1JeXwoP35XnGXsQcBrAzNdb2c445JHaBjrl0PrVgBmGJTOoGrQcdb2YucqvbdbMctHT8lWGvUjavpmeyltjavfmeykmf2Y(Cdmeyltjavfmeykmf2sIwOVJta)OWaQyl7rWadb2YucqvbdbMctHPWwo)FrvgtpGA1U0F)XUHHatHPWwAyl4GVdEPGVtIyl9kMKD9GRdtHHb


--[[
Author : Aethys
Version : 1.3 (02.16.2015)
Readme :
	WeakAura to display the 5 last interrupters of your target or your focus if it's an ennemy.
]]--


--- Actions\On Init\Custom ---

-- Init


--- Trigger\Custom Trigger ---

-- Trigger [COMBAT_LOG_EVENT_UNFILTERED]
function(_,_,message,_,_,sourceName,_,_,destGUID)
    if message == "SPELL_INTERRUPT" and (destGUID == UnitGUID("focus") or (destGUID == UnitGUID("playertarget") and (UnitGUID("focus") == nil or UnitIsFriend("player", "focus") == true))) then
        
        if WA_Aethys_Kicked_LastGUID == nil or WA_Aethys_Kicked_LastGUID ~= destGUID then
            WA_Aethys_Kicked_Player = {}
            for i=1,5 do
                WA_Aethys_Kicked_Player[i] = {}
                for j=1,2 do
                    WA_Aethys_Kicked_Player[i][j] = 0
                end
            end
        end
        WA_Aethys_Kicked_LastGUID = destGUID
        
        for i=5,2,-1 do
            for j=2,1,-1 do
                WA_Aethys_Kicked_Player[i][j] = WA_Aethys_Kicked_Player[i-1][j]
            end
        end
        
        local PlayerClassColor
        if UnitExists(sourceName) == true then
            PlayerClassColor = RAID_CLASS_COLORS[select(2,UnitClass(sourceName))]
        else
            PlayerClassColor = {r = 0.502, g = 0.502, b = 0.502}
        end
        WA_Aethys_Kicked_Player[1][2] = GetTime()
        local name = sourceName and string.gsub(sourceName, "%-[^|]+", "") or sourceName;
        WA_Aethys_Kicked_Player[1][1] = format("%02x%02x%02x%s|r", PlayerClassColor.r*255, PlayerClassColor.g*255, PlayerClassColor.b*255, name)
        return true
    end
    return false
end


--- Display\Custom Function ---

-- Refresh [Every Frame]
function()
    if WA_Aethys_Kicked_Player and GetTime()-WA_Aethys_Kicked_Player[1][2] <= 60 then
        if WA_Aethys_Kicked_Player[2][1] == 0 then
            return format("(%1.f) |cFF%s Kicked", GetTime()-WA_Aethys_Kicked_Player[1][2], WA_Aethys_Kicked_Player[1][1])
        elseif WA_Aethys_Kicked_Player[3][1] == 0 then
            return format("(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked", GetTime()-WA_Aethys_Kicked_Player[2][2], WA_Aethys_Kicked_Player[2][1], GetTime()-WA_Aethys_Kicked_Player[1][2], WA_Aethys_Kicked_Player[1][1])
        elseif WA_Aethys_Kicked_Player[4][1] == 0 then
            return format("(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked", GetTime()-WA_Aethys_Kicked_Player[3][2], WA_Aethys_Kicked_Player[3][1], GetTime()-WA_Aethys_Kicked_Player[2][2], WA_Aethys_Kicked_Player[2][1], GetTime()-WA_Aethys_Kicked_Player[1][2], WA_Aethys_Kicked_Player[1][1])
        elseif WA_Aethys_Kicked_Player[5][1] == 0 then
            return format("(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked", GetTime()-WA_Aethys_Kicked_Player[4][2], WA_Aethys_Kicked_Player[4][1], GetTime()-WA_Aethys_Kicked_Player[3][2], WA_Aethys_Kicked_Player[3][1], GetTime()-WA_Aethys_Kicked_Player[2][2], WA_Aethys_Kicked_Player[2][1], GetTime()-WA_Aethys_Kicked_Player[1][2], WA_Aethys_Kicked_Player[1][1])
        else
            return format("(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked\n(%1.f) |cFF%s Kicked", GetTime()-WA_Aethys_Kicked_Player[5][2], WA_Aethys_Kicked_Player[5][1], GetTime()-WA_Aethys_Kicked_Player[4][2], WA_Aethys_Kicked_Player[4][1], GetTime()-WA_Aethys_Kicked_Player[3][2], WA_Aethys_Kicked_Player[3][1], GetTime()-WA_Aethys_Kicked_Player[2][2], WA_Aethys_Kicked_Player[2][1], GetTime()-WA_Aethys_Kicked_Player[1][2], WA_Aethys_Kicked_Player[1][1])
        end
    else
        local ExampleTable = {"Name1", "Name2", "Name3", "Name4", "Name5"};
        return format("%s Kicked\n%s Kicked\n%s Kicked\n%s Kicked\n%s Kicked", ExampleTable[1], ExampleTable[2], ExampleTable[3], ExampleTable[4], ExampleTable[5])
    end
end