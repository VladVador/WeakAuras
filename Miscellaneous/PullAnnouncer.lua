--- WeakAura Strings ---
d8KlQaGis1LKQk0OOkDkQQEfssPzHQ6wsLDrL(LuvbdJqQJrkvldPsptQQAAIcDnKk2MeP(gssghssLZrijVdPQ5riPQ7HI2hHKYbrvwOOOhIetKk6IKInskPpIigjPeNuk1kPKxkvvAMis3uQYofL(jvyOuvwQuYtLIPkHRkrSvKKIVskLglssvNfjXBLO6Usu2ls5VI0GHdtYIjepwu1KfXLf2SOYNPkgnH60e8ArbZMsDBe1Uj63OYWrsTCj9CuA6uCDe2ok8DjsgVuvrNxQkRNqsL3tkfnFcjUpPuy)QPPDAf0AitRjHwtcTcAnjcSuBR6Ri6NgAn0AiKMQGhprLwbTM8eSgoY0AYriZBe4KdV(3AmgJAyiQYHPse0VvitOzO1udpcCYI(OoO1yI(PHwJkVrGruuf84jQ94scAzfnTgbPGjnphzQTdtKqlR2P1OYBe4KS0kO1iifm0kO1KWLMNG1WrMwM0AYtWA4itRPRRBRUUrjSrDq1OQckrSd2HxQWrmeRyedd3OFOg2CQKHkNjQdYCjc5eYRmcCsw)B111TLIOQsdjd3ECjXG5qNKwokXNo9JUUrtyggXXOOQYNHOo6XLe8h6K0Yrj(0hgUHPQYNHbzoryhutyBhjdr6BqsLJG6rVGSirLL)qNhPKQpmCdtvLpdJGru7Ziwq6XDlfrvLgsgUueRKYWEWCO3WJk60p66goimutygueRKYWERUUHpcZqNxjfo0hgUrIal12Q(ggXXGCWYQ8edb5qVfV2o1hLsSGDmeKJwkHe(dDF8Avqf9rPelyhdb5WNQA6J)qNuhu4rQ(OuIfSJblNnN7WlvFxRqztE4PYrq9qvJHGhjxnsC9Vvx3WhHzOZRKchu96gUrIal12Q(ggXXGCWYQ8edb5qVD2McEzPOjLIw4vOpkLyb7yiihTLSgLmFmiPYrqn)HElETDQpkLyb7yiihTucj8h6(41QGk6JsjwWogcYHpv10h)HoPoOWJu9rPelyhdwoBo3T66g(imdDsDqHhP6dd3irGLABvFdJ4yqoyzvEIbN0UVroU6OpoIbxDWjhgXXiVyLug2J(4igLsjndVmu2eb7qKWMRu(D3QRBO3WJk68h6urdPKQZFO7JxRcQOZFOtsjTj1Po)HUdTQ12u00sN)qVfV2o15p0BXRTZuTLxRSTZsIo)HE7Snf8YsrtkfTWRq3DRUUUT66gu4QXGQrvfuIyhSdVoDmY6Oyu4OekAX)wDDDBPiQQ0qYWLchzruMcbYb)HIOQsdjdxhegkCKfrzkeihdMdrZFiA63sruvPHKHBMCSS94skeih8hkIQknKmCZKJLThxIgzsHa5yWCiA(drt)wkIQknKmC9ryBhj8hkIQknKmCBXXAI6G5qBQn4p0MAd63sruvPHKHBd1HTn7G5qBU1ymgDDJcfH0S1ymgL3F6qNYgmhMkrWF01n0wvTkWvhDJcfH0S1ymgLxA6QD6MXYgmhMkrWF01n8PSvjcYr3OvKpdCsbPNTgJXOC6kAQQ)LUSbZHPse8hDDdTqinrD0nCkWAQQ8gbPNrJyoZwJXyuoDknDPlDlBWCyQeb)rx3Wz)o6gov1mmOWrMSsMS1ymgLRDTth6KXsx2G5Wujc(JUUrpozggDdFvogCzi2AmgJYlnvjQOtzdMdtLi4p66goRecjJUbjvUszV1ymgLRDQo6q3msNYgmhMkrWF01nCQLr3OGRsoKMTgJXORB0iyhY8r)qBPjQvcQnBngJr5LMo0HULnyomvIG)ORBOTQAvGRo6g(iitoS3AmgJYfvLMU9x7LnyomvIG)ORB4tzRseKJUrRqeImeBngJr5ApJuv)lnDlBWCyQeb)rx3qlestuhDdkCestuhnI5mBngJr5ANQkDPlBWCyQeb)rx3OfNhIy0n6xH8zyRXymkpJuvgPQsx2G5Wujc(JUUHZ(D0nAmvL0dHTYeBngJr5zKQOdDP6kBWCyQeb)rx3Wz)o6g9eKj5QriQl2AmgJY1ovx)Pk6q3YgmhMkrWF01nCQLr3GcNKLGCm6P8iKFRXym66godriYLBRXymkpJ0Ho0nJLnyomvIG)ORB4SFhDdkIvcs2bxUr78XwJXyuEgfv0HQkDzdMdtLi4p66go73r3WzOmIhKufOERXymkNQOQsl6sx2G5Wujc(JUUHZ(D0nCQQzy0iqMWwLVsqERXym66gueRKYWERXymkx7ANQev0HULnyomvIy01n6XjZWOBqPQYNbBbPNHLkjgKk4rSrki9SL2G(T6662QRBqHRgdTsiZBe4KSdVoDmY6Oyu4OekAX)wDDDB11n0kHmVrGtYomCd2qMmmIJb5GLv5jC3khHmVrGtouevvAiz46GWqnHz4TxWYQ8e8hf9rDWFqrSskdB)BngJHqUrrFuhdMmh6K6Gcps1hgXHCRXymgJXqi3qruvPHKHBMCSS94skeihJffMdrpuYKHIOQsdjd3m5yz7XLOrMuiqo6ijmfcKdV(hIAmhDAFyehYTgJXymgJXymOUkinE7fSSkpHRR(qzg6UUSMQG0JBoUkzLXRE)OODPBoD(dfrvLgsgUzYXY2JlrJmPqGC0rsykeihE9731vN1v3p9BngJXymgHnBS1ymgJXymgJb1vbPXBVGLv5jCD1D19t)wJXymgJrit2AmgJWMneYnk6J6yWK5qNIw4vOpmId5wJXymgJHqUHIOQsdjd3m5yz7XLuiqoglkmhIEOKjdfrvLgsgUzYXY2JlrJmPqGC0rsykeihE9pe1yo60(WioKBngJXymgJXy0eYekIvMEblRYt4TxWYQ8eUU6dLzO76YAQcspU54QKvgV69JI2LU505puevvAiz4MjhlBpUenYKcbYrhjHPqGC41VFxxDwxD(dfrvLgsgUueRKYW2p9BngJXymgHnBS1ymgJXymgJrtitOiwz6fSSkpH3EblRYt46Q7QZFqrSskdB)0V1ymgJXyeYKTgJXiKjBfYKTYriZBe4KdfrvLgsgUnHmPxWYQ8edV9cwwLNW)wJXyiKBOiQQ0qYWLIyLug2dMmh68kPWH(WioKBngJXymgc5gTzBljPYrqTxs1K6JxRcQKsHxHgsC0IkPAXrpn(hgXHCRXymgJXymgdHCJ2STLTucjE9pmId5wJXymgJXymgJXyOiQQ0qYW1bHHAcJ3EblRYtWFOtrl8k05p0BXRTtD)0V1ymgJXymgJryZgBngJXymgJXymgJHIOQsdjdxhegQjmE7fSSkpb)HofTWRqN)q3hVwfur3p9BngJXymgJXyeYKTgJXymgJWMn2AmgJXymgJXqruvPHKHRdcd1egV9cwwLNG)qNuhu4rQUF63AmgJXymczYwJXye2SHqUHIOQsdjdxkIvszypyYCOZRKchu96dJ4qU1ymgJXyiKB0MTTKKkhb1E9pmId5wJXymgJXymgc5gTzBljPYrqTxs1K6JxRcQKsHxHgsC0IkPTZ2uWllfn(hgXHCRXymgJXymgJXymuevvAiz46GWqnHXBVGLv5j4p0POfEf68h6TZ2uWllfnPu0cVcD)0V1ymgJXymgJryZgc5gTzBlBPes86FyehYTgJXymgJXymgJXqruvPHKHRdcd1egV9cwwLNG)qNIw4vOZFO3IxBN6(PFRXymgJXymgJWMn2AmgJXymgJXymgdfrvLgsgUoimuty82lyzvEc(dDkAHxHo)HUpETkOIUF63AmgJXymgJXiKjBngJXymgHnBS1ymgJXymgJHIOQsdjdxhegQjmE7fSSkpb)HoPoOWJuD)0V1ymgJXyeYKTgJXiSzdHCdfrvLgsgUueRKYWEWK5qNuhu4rQ(WioKBngJXymgkIQknKmCDqyOMW4TxWYQ8e8h6K6Gcps19t)wJXye2SHqUHIOQsdjdxkIvszypyYCO3WJk6dU6qruvPHKHlfXkPmShmzo0PIgsjvFWvhkIQknKmCPiwjLH9GjZHUpETkOI(GRouevvAiz4srSskd7btMdDskPnPo1hC1HIOQsdjdxkIvszypyYCO7qRATnfnT0hC1HIOQsdjdxkIvszypyYCO3IxBN6dU6qruvPHKHlfXkPmShmzo0BXRTZuTLxRSTZsI(GRouevvAiz4srSskd7btMd92zBk4LLIMukAHxH(WioKBngJXymgkIQknKmCDqyOMW4TxWYQ8e8h6u0cVcD(dfrvLgsgUueRKYW2p9BngJryZgBngJXymguxfKgV6LRT8s9ryBZtk5iYh1YgABLt6zKxSskd7bBygcYHrCmAlfmJMiVrGt6Q7N(TgJXiKjBngJHIOQsdjdxkCKfrzkeihdMdfrvLgsgUu4ilIYuiqogDJ(t)wJXyuddrvs)wHmHMHMHwJsMxmx1hNG0qRHunATGwdByNZhNG0qRHunATGwJPk4XtuPvqRX0h1bTM8eSgoY0AYtWA4iNA6J6GwtWiKgAnbJqAyP1qXrVm5vKsQdss1q1OjBrAjz1ABsl00sJt(dFKYJkAAL2sdjAYM6SDdVmjvJt(dFKYJkAAL2sdjAYMQjlVmjvJt(dkAHxrAVgss550PJS8hK0Yrj(sB5OPqtR0s85KxHg(Jw8A7mTD2McEzPOjvB1qkfh90qRjpbRHJmTMCeY8gbo5WRggH0WF4Rg5e6N8hu4ilIYOHrin8hP8hnCe18bjL02j)rdhrnFKvro4pA4iQ5dTAR8WYFKYF4mynKusBN8hodwtwf5G)WzWA0QTYdl)rk)rd1HTDBN8hnuh22zvKd)BngJrx3itow2rpUKHpcB7rHa5Oo0IsMyhv3TgJXqi3qdJqAgmzo0POfEfP9AijLNtNoYQpmId5wJXymgJHqUHVAKtOFoyYCO7mJ6dLmzWAQcspU5eKjEPWrweLrdJqA4p09vO7FyehYTgJXymgJXymuevvAiz4MjhlBpUKcbYXG5WWjjilsu9YAQcspUSeI4LchzrugnmcPH)iJ8h0XVF63AmgJXymgJXqruvPHKHBMCSS94s0itkeihdMdsctHa5WR)bv7qruvPHKHBMCSS94skeih0V1ymgJXyeYKTgJXymgJUUrjuNOmXWiogKu5iOE0IJ1e1HqUHrCmiZLedb2bByggUbjvocQD3AmgJWMneYn0WiKMbtMdDsA5OeFPTC0uOPvAj(CYRqJ(GRo0WiKMbtMd9w8A7mTD2McEzPOjvB1qkfh90OpmId5wJXymgJHqUHIOQsdjd3ECjXGjZHojTCuIp9HrCi3AmgJXymgJXqruvPHKHBlowtuhmhAtTb9BngJXymgJXyiKB0MTTKKkhb1E9pmId5wJXymgJXymgJXyyZLxzpk6J6G)iRICWF0evgrL(TgJXymgJXymgJXqi3OnBBzlLqIx)dJ4qok6J6yWCO3sjKOt)iSzJrrFuhdMdDFQQPpD6hHmzRXymgJXymgJXymYXvhcdMdTZFqsyYsqMKkhb19cYIevwV(hjCBngJXymgJXymgJXymgzvKd(JMOYiQdMJsKcMSkYH3I(OoCDf8t)wJXymgJXymgJXymgJHqUrwf5yyehYTgJXymgJXymgJXymgJXymuevvAiz42IJ1e1YBIkJOouYKrtuze1XIcZHU(qjtgzvKdxx9oDx3MOYiQdU6iRICu2G5Wujc63AmgJXymgJXymgJXymczYwJXymgJXymgJXyeYKTgJXymgJXymcB2yRXymgJXymgJXymuevvAiz42IJ1e1YlrkyYQihE19zR6lQ6(lBWCyQeb9BngJXymgJXyeYKTgJXymgJqMS1ymgJXy01n4zBZvQroIQrCuhueh5Za7OuId5WdNG0ZqqoYZrweLXDRXymcB2qi3qdJqAgmzo09rkpQOPvAlnKOjBQZ2n8YKuno1hgXHCRXymgJXqruvPHKHlfoYIOmfcKJbZbjHPqGC41)GQD0F63AmgJXym66g(QbJqAg5iQgXrDqrCKpdSJsjoKdpCcspdocZGl3iphzrug3TgJXiSzdHCdnmcPzWK5q3hP8OIMwPT0qIMSPAYYlts14uFyehYTgJXymgdfrvLgsgUoimu4ilIYuiqogmhKeMcbYHx)dQ2bDOFRXymgJXqruvPHKHRpcB7izWCOn1g0V1ymgJXy01n8ryBpOioYNHHwuYe7OU1ymgHnBiKBqsykeihE9pe1youevvAiz46GWqHJSiktHa5yOKjdVELCMrjsbtBwNHkXrLeXCSgV6(Sv9fvD)dLmzi5mJ2skCKfrziLlFgs4kL0RF)dU6GKWuiqo86FiQN5qruvPHKHlfoYIOmfcKd)dLmz0WruZhzvKJHsMmCgSMSkYXqjtgnCe18rwf5ySOWC4mynzvKJHsMm8QiQQ0qYWThxsmyYCOZJus1hC1HIOQsdjd3wCSMOwEdhrnFKvrokBWvhkIQknKmCBXXAIA5odwtwf5Om)dLmzi5mdwtvq6XnNGmXlfoYIOmAyesd)HUpnTA7WzBk6(hkzYWlRPki94MtqM4LchzrugnmcPH)qp1jVE8irJU)bxDWAQcspU5eKjEPWrweLrdJqA4p0t71UPrJtD)dU6G1ufKECZjit8sHJSikJggH0WFOtHxtrAtjuOOPPr3V)HrCi3AmgJXym66g(Sv9f1bpJrLpdBngJXymgc5gIiyCfrjt82WruZhA1w5HL)GIJEzYRGuhKK6itlnukslOIpnP(iLhv00Y)yrH5q0dLmziIGXveLmXRZG1OvBLhw(dko6LjVcsDqsQJmT0qPiTGk(0KM1hf)JffMdrpmId5wJXymgJXymgc5gsoZqruvPHKHRpcB7iPCNbRHKsA7SSHrCi3AmgJXymgJXymgdHCdwtvq6XnNGmXlfoYIOmAyesd)HEJ22olj6(hgXHCRXymgJXymgJXymgJXqruvPHKHRpcB7iPCNbRHKsA7SSbZHPse0V1ymgJXymgJXymgJXyOiQQ0qYWTjKj9cwwLNWBdhrnFKvroCD1hutyBhjdDxxNbRjRIC46QpkLGr8GhHHBWZyu5ZGUF63AmgJXymgJXymgJXymQHHOkPFRXymgJXymgJXymcB2qi3qYzgSMQG0JBobzIxkCKfrz0WiKg(dDk8AksBkHcfnnn6(hC1HIOQsdjd3gQdBB2YBOoSTB7SSHrCi3AmgJXymgJXymgJXymuevvAiz46JW2osk3zWAiPK2olBWCyQeb9BngJXymgJXymgJXymgkIQknKmCBczsVGLv5j82WruZhzvKdxx9b1e22rYq311zWAYQihUU6Jsjyep0DDBOoSTZQih(PFRXymgJXymgJXymgJXOggIQK(TgJXymgJXymgJXiKjBngJXymgJXyeYKTgJXymgJXym66gzYL03WhHT9wJXymgJryZgc5gIiyCfrjt86mynA1w5HL)GIJEzYRGuhKK6itlnukslOIpnP(iLhv00Y)yrH5q0dLmziIGXveLmXBdhrnFOvBLhw(dko6LjVcsDqsQJmT0qPiTGk(0KM1hf)JffMdrpmId5wJXymgJXymgc5gsoZqruvPHKHRpcB7iP8goIA(GKsA7SSHrCi3AmgJXymgJXymgdfrvLgsgU(iSTJKYB4iQ5dskPTZYgmhMkrq)wJXymgJXymgJXyOiQQ0qYWTjKj9cwwLNWRZG1KvroCD1hIWL03GAcB7izO762WruZhzvKd)0V1ymgJXymgJXymg1WquL0V1ymgJXymgJrit2AmgJXymgJXORB4lmdEgJkFg2AmgJXymcB2qi3qebJRikzI3goIA(qR2kpS8huC0ltEfK6GKuhzAPHsrkfhzlA5G0uFKYJkAA5FSOWCi6HsMmerW4kIsM41zWA0QTYdl)bfh9YKxbPoij1rMwAOuKwqfFAsZ6JI)XIcZHOhgXHCRXymgJXymgdHCdjNzOiQQ0qYW1hHTDKuUZG1qsjTDw2WioKBngJXymgJXymgJHIOQsdjdxFe22rs5odwdjL02zzdMdtLiOFRXymgJXymgJXymuevvAiz42eYKEblRYt4THJOMpYQihUU6E9fg)dQjSTJKHURRZG1Kvro8t)wJXymgJXymgJXyuddrvs)wJXymgJXymgHmzRXymgJXymgJUUHVWmYKlPVHpcB7TgJXymgJWMneYnerW4kIsM4THJOMp0QTYdl)bfh9YKxbPoij1rMwAOuKsXr2Iwoin1hP8OIMw(hlkmhIEOKjdremUIOKjEB4iQ5dTAR8WYFqXrVm5vqQdssDKPLgkfPfuXNM0S(O4FSOWCi6HrCi3AmgJXymgJXqi3qYzgkIQknKmC9ryBhjL3WruZhKusBNLnmId5wJXymgJXymgJXyOiQQ0qYW1hHTDKuEdhrnFqsjTDw2G5Wujc63AmgJXymgJXymgdfrvLgsgUnHmPxWYQ8eEDgSMSkYHRRUxFHX)qeUK(gutyBhjdDx3goIA(iRIC4N(TgJXymgJXymgJXOggIQK(TgJXymgJXymczYwJXymgJrit2AmgJqMS1ymg1WquL0VvitO1KNG1WrovSqsqRjpbRHJmndTgHeAnAlVuEHrCFSP(iST5jLCeY8rLwtUQIC0yQkJIww6sRPucjgX00AgPJO7FP7F)ZiDenD7pvjQOdDPLRJo0LwJKGCrvWJNOYslR2P1ioe8i2qtRzKoIU)LU)9pJ0r00T)uLOIo0LwUo6qxAn2CQeAf0AiyJuzWiQ0eHwJrzhsdTcAnKjSnc0kOzOzO1KiKlNqEcBtF0kO1qMW2iqRGMHMHwtvLpOvqRHmHTrGwbndndTMCQ8gbojTcAnKjSnc0kOzOzO1qndQnk7qAOvqRHmHTrGwbndndTMkNDqRGwdzcBJaTcAgAgAgAnQKebJaNuzNAQcE8evwAf0m0m0AyP1qxx66QDxTtRHbTSApJ0v70m0Oba

--[[
Author : Aethys
Version : 1.0 (06.18.2016)
Readme :
    WeakAura that send a chat message to show who pulled and how far from the Pull Timer if there is one.
    You can customize the channel output in the init section.
]]--


--- Actions\On Init\Custom ---

-- Init
---
-- User Variables (You have to /reload after modifications)
---
aura_env.Mode = "GROUP"; -- Set the Tracker Mode, "GROUP" to track mobs pulled by Group Members, "ALL" to track everything.
aura_env.Channel = "SAY"; -- Output Channel
-- Put "AUTO" to display the message in "RAID" while in Raid, "PARTY" while in Party, "LOCAL" while solo. (X-Realm group are ignored.)
-- Put "AUTOX"to display the message in "INSTANCE_CHAT" while in Instance Group, "RAID" while in Raid, "PARTY" while in Party, "LOCAL" while solo.
-- Put "LOCAL" to display the message only for you or on the channel you want (values below).
-- "SAY", "YELL", "PARTY", "GUILD", "OFFICER", "RAID", "RAID_WARNING", "INSTANCE_CHAT".
---
-- Core Variables (DO NOT TOUCH)
---
aura_env.CombatTime, aura_env.OutCombatTime = 0, 0;
aura_env.BossModTime, aura_env.BossModEndTime = 0, 0;
aura_env.Pulled, aura_env.Roster = {}, {};
aura_env.Spells = {
    -- Taunt
    [355] = true, -- Warrior - Taunt
    [62124] = true, -- Paladin - Reckoning
    [20736] = true, -- Hunter - Distracting Shot
    [56222] = true, -- DK - Dark Command
    [115546] = true, -- Monk - Provoke
    [6795] = true, -- Druid - Growl
    [185245] = true, -- DH - Torment
    -- Silence/Interrupt
    [6552] = true, -- Warrior - Pummel
    [96231] = true, -- Paladin - Rebuke
    [147362] = true, -- Hunter - Counter Shot
    [1766] = true, -- Rogue - Kick
    [47476] = true, -- DK - Strangulate
    [47528] = true, -- DK - Mindfreeze
    [183752] = true, -- DH - Consume Magic
    -- Debuff
    [45524] = true, -- DK - Chains of Ice
    [49576] = true, -- DK - Death Grip
    [77606] = true, -- DK - Dark Simulacrum
    -- Channel
    [117952] = true -- Monk - Crackling Jade Lightning
};
---
-- Core Functions (DO NOT TOUCH)
---
-- Functions to send the message.
function aura_env.Output (Message, Type, Channel)
    if Type == "LOCAL" then
        if aura_env.BossModTime ~= 0 and aura_env.BossModEndTime-GetTime() >= -1 then
            print(Message.." at "..string.format("%0.2f", aura_env.BossModEndTime-GetTime()).."s.");
        else
            print(Message..".");
        end
    elseif Type == "CHAT" then
        if aura_env.BossModTime ~= 0 and aura_env.BossModEndTime-GetTime() >= -1 then
            SendChatMessage(Message.." at "..string.format("%0.2f", aura_env.BossModEndTime-GetTime()).."s.", aura_env.Channel);
        else
            SendChatMessage(Message..".", Channel);
        end
    end
end
function aura_env.SendMessage (Message)
    if aura_env.Channel == "AUTO" then
        if IsInGroup(LE_PARTY_CATEGORY_HOME) then
            if IsInRaid() then
                aura_env.Output(Message, "CHAT", "RAID");
            else
                aura_env.Output(Message, "CHAT", "PARTY");
            end
        else
            aura_env.Output(Message, "LOCAL");
        end
    elseif aura_env.Channel == "AUTOX" then
        if IsInGroup() then
            if IsInGroup(LE_PARTY_CATEGORY_INSTANCE) then
                aura_env.Output(Message, "CHAT", "INSTANCE_CHAT");
            elseif IsInRaid() then
                aura_env.Output(Message, "CHAT", "RAID");
            else
                aura_env.Output(Message, "CHAT", "PARTY");
            end
        else
            aura_env.Output(Message, "LOCAL");
        end
    elseif aura_env.Channel == "LOCAL" then
        aura_env.Output(Message, "LOCAL");
    elseif aura_env.Channel == "SAY" or aura_env.Channel == "YELL" or aura_env.Channel == "PARTY" or aura_env.Channel == "GUILD" or aura_env.Channel == "OFFICER" or aura_env.Channel == "RAID" or aura_env.Channel == "RAID_WARNING" or aura_env.Channel == "INSTANCE_CHAT" then
        aura_env.Output(Message, "CHAT", aura_env.Channel);
    else
        print("[WA_PullAnnoucer] Wrong channel set in the Init Section.");
    end
    aura_env.CombatTime = aura_env.CombatTime - 3;
    return;
end

--- Trigger\Custom Trigger ---

-- Trigger [COMBAT_LOG_EVENT_UNFILTERED, PLAYER_REGEN_DISABLED, PLAYER_REGEN_ENABLED, CHAT_MSG_ADDON, GROUP_ROSTER_UPDATE, RAID_INSTANCE_WELCOME]

function (Event, Prefix, CombatEvent, _, SourceGUID, SourceName, SourceFlags, _, DestGUID, DestName, DestFlags, _, SpellID, SpellName)
    -- Boss Mod Pull Timer Handler.
    if Event == "CHAT_MSG_ADDON" then
        if Prefix == "D4" and string.find(CombatEvent, "PT") then
            aura_env.BossModTime = tonumber(string.sub(CombatEvent, 4, 5));
            aura_env.BossModEndTime = GetTime() + aura_env.BossModTime;
        end
        -- Update the Group Roster if the mode is set to Group.
    elseif Event == "GROUP_ROSTER_UPDATE" or Event == "RAID_INSTANCE_WELCOME" then
        if aura_env.Mode == "GROUP" then
            aura_env.Roster = {};
            if IsInGroup() then
                local Type, Name, Server;
                if IsInRaid() then Type = "Raid"; else Type = "Party"; end
                for i = 1, GetNumGroupMembers() do
                    Name, Server = UnitName(Type..i);
                    if Name then
                        aura_env.Roster[Server and Server ~= "" and Name.."-"..Server or Name] = true;
                    end
                end
            else
                aura_env.Roster[UnitName("Player")] = true;
            end
        end
        -- Allow further Checks when going in combat.
    elseif Event == "PLAYER_REGEN_DISABLED" then
        aura_env.CombatTime = GetTime() + 3;
        -- Prevent further Checks when going out of combat.
    elseif Event == "PLAYER_REGEN_ENABLED" then
        aura_env.OutCombatTime = GetTime() + 5;
        aura_env.Pulled = {};
        -- Pull Check Handler
    elseif GetTime() >= aura_env.OutCombatTime and ((not UnitIsDeadOrGhost("Player") and not InCombatLockdown()) or GetTime() <= aura_env.CombatTime) and SourceName and DestName and SourceName ~= DestName and (aura_env.Mode == "ALL" or aura_env.Roster[SourceName] or aura_env.Roster[DestName]) and not string.find(CombatEvent, "PERIODIC") and (string.find(CombatEvent, "_DAMAGE") or string.find(CombatEvent, "_MISSED") or string.find(CombatEvent, "CAST_SUCCESS")) then
        -- Player Attack
        if bit.band(SourceFlags, COMBATLOG_OBJECT_TYPE_PLAYER) ~= 0 and bit.band(DestFlags, COMBATLOG_OBJECT_TYPE_NPC) ~= 0 then
            if not aura_env.Pulled[DestGUID] then
                if string.find(CombatEvent, "SWING") then
                    aura_env.Pulled[DestGUID] = true;
                    aura_env.SendMessage(SourceName.." pulled "..DestName.." with Auto Attack");
                    return;
                elseif not string.find(CombatEvent, "CAST_SUCCESS") or aura_env.Spells[SpellID] then
                    aura_env.Pulled[DestGUID] = true;
                    aura_env.SendMessage(SourceName.." pulled "..DestName.." with "..SpellName);
                    return;
                end
            end
            -- Body Pull
        elseif bit.band(DestFlags, COMBATLOG_OBJECT_TYPE_PLAYER) ~= 0 and bit.band(SourceFlags, COMBATLOG_OBJECT_TYPE_NPC) ~= 0 then
            if not aura_env.Pulled[SourceGUID] then
                aura_env.Pulled[SourceGUID] = true;
                aura_env.SendMessage(DestName.." body pulled "..SourceName);
                return;
            end
            -- Pet Attack
        elseif bit.band(SourceFlags, COMBATLOG_OBJECT_CONTROL_PLAYER) ~= 0 and bit.band(DestFlags, COMBATLOG_OBJECT_TYPE_NPC) ~= 0 then
            if not aura_env.Pulled[DestGUID] then
                aura_env.Pulled[DestGUID] = true;
                aura_env.SendMessage(SourceName.."(Pet) pulled "..DestName);
                return;
            end
            -- Pet Body Pull
        elseif bit.band(SourceFlags, COMBATLOG_OBJECT_CONTROL_PLAYER) ~= 0 and bit.band(SourceFlags, COMBATLOG_OBJECT_TYPE_NPC) ~= 0 then
            if not aura_env.Pulled[SourceGUID] then
                aura_env.Pulled[SourceGUID] = true;
                aura_env.SendMessage(DestName.."(Pet) body pulled "..SourceName);
                return;
            end
        end
    end
    return;
end

-- Untrigger
function ()
	return true;
end