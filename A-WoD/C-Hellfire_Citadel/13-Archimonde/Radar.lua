--- WeakAura Strings ---
dCfbQbqiHiQSiPkxsicJsfDkvYQuO6vcrnlH0Tub7sv5xQuyykqhtKyzIKEMkettQQQRPqX2KiX3uPiJtHsDofkX6usmpviv3tsAFkusmqfkj5GkiwOeP6HkOMOkvCrrLSrHi9rPQkJuuPCsjszLsLxkQuXmfiDtviLDQc1pLiPHQKuhvHssTuvQ6PIutvQkxvLsBvLI6RQuPXQqj1zfIOSwHiQ6TkPmxbI7QKQ9kG)QagmDyfTyjIhRQAYkXLLYMfKplQy0cQtlkRwuPQxlqz2c1Tvi7we)wvgUq44IkvA5sQNlHPRuxxIA7ki9DPQY4fvDEjX6vsY7fIiZxfsUVav7hhiLa9fi9OaPxcKEjqFbs)kVJZsAbk9aPZxQHcv02booLugmq6LSIiINv6RLFhiDU1IJFyK4NUaP)lxSFJ6RLFhi9Hd49Tq1TIW0fQCY)o7LCErhIig)(NXyiSkE32mydPC9SyTE1TCYEjf9wFTz565aTKH(LTS(A9QB5K9s6ToDiIyOvs323nBzh(C0m)zOv6V2(Uzl7WNxrXqR0FTDU1YYj8(866Ioerm0kPB7CRLLt49zOv6V2(Uzl7WNxx0HiIXV)zmw8pJByvm0k9xBF3SLD4ZRBKYGdshIishIig6RKCWQyOVsYbF1yOvgUUn3T(A53LRBNjzXrXEL(qgo3P)UVuV9470lkMKfhfh8Ioerm0xj5Ss62UVw(D562zVslz3Qdn)BbjidzzPutkcsqUBBgSHuUEweKGC0AlzZGeK(A53LRBfbjidNv)h3g4UHZ2Tbk9x9sRU3fDiIyOVsYzL0T9qIJx9llzxCg6Ioerm0xj5Ss62(MB17w(HFXV6ZVJef)osu87irXVB6IoerKoerm0xeXZkTASkg6lI4zLwn(Qrm0kdx3M7wFT87Y1TZKS4OyVsFidN70F3xQ3E8D6fftYIJI9)fDiIyOViINvA1RKUT7RLFxUUD2R0s2T6qZ)wqcYqwwEjfbji3Tnd2qkxplcsqw9RFT6HuUEwC0AlzZGeKHuUEweKGmKY1ZuszS7DrhIig6lI4zLw9kPB7v)Ys2N9goxh3xUUVxumuuS3W564(Y199IIdgfh8Ioerm0xeXZkT6vs323nBzh(mLbhV4Fg3UOdred9fr8SsREL0TDU1YYj8(mLbhV4Fg3UOdrePdreZcHZY1ZbAjd9l0WHNVI7Kver8ScUd3sOdrereXqFrepR0QlWQyOViINvA1f4RgJKcoDiIiIig6lolPvGvXqFXzjTc8vJrsbNoererePdrereXqVAmRAkrtDqC5rhIiIiIiIyOV4SKwXAzRJvXqFXzjTI1YwhF1igALHRBZDRVw(D562zswC0EL(qgo3P)UVuV9470lkMKfhft9IoererereXqFXzjTI1YwFL0TDFT87Y1TZELwYUvhA(3csqgYYsPMueKGC32mydPC9Siib5O1wYMbji91YVlx3kcsqsN7wEw3g4UHZ2TEx0HiIiIiIig6lolPvSw26RKUTV5w9ULF4x8R(CWOPeDWOPCrhIiIiIiIyOV4SKwXAzRVsULT0oVqererKoerererer6qererered9fr8SsRUyTS1XQyOViINvA1fRLTo(QXqRmCDBUB91YVlx3otYIJI9k9HmCUt)DFPE7X3PxumjlokEKl6qererered9fr8SsRUyTS1xjDB3xl)UCD7SxPLSB1HM)TGeKHSSuQjfbji3Tnd2qkxplcsqoATLSzqcsFT87Y1TIGeKHZQ)JBdKE07TdpqP)QxA19UOdrerererm0xeXZkT6I1YwFL0T9DZw2Hp7)Xl(NXTl6qererered9fr8SsRUyTS1xjDBNBTSCcVp7)Xl(NXTl6qererered9fr8SsRUyTS1xj3YwANx0HiIiIylzHoerSLSqhIishIiMfcNLRNd0sg6xrFV6rTK9DYkIiEwb3HBj0HiIiIyOVIWZ)Gf3kWQyOVIWZ)Gf3kWxngjfC6qererm0xr45FWIB7w(nwfd9veE(hS42ULFJVAmsk40HiIiIiDiIiIig6vJzvtj6rWLhDiIiIiIiIH(kcp)dwCRyTS1XQyOVIWZ)Gf3kwlBD8vJHwz462C36RLFxUUDMKfhf7v6dz4CN(7(s92JVtVOyswCum1l6qererered9veE(hS4wXAzRVs62UVw(D562zVslz3Qdn)BbjidzzPutkcsqUBBgSHuUEweKGC0AlzZGeK(A53LRBfbjidNv)h3g4UHZ2TEx0HiIiIiIig6Ri88pyXTI1YwFL0T9n3Q3T8d)IF1NdgDWOd(Dtr)gZfDiIiIiIiIH(kcp)dwCRyTS1xj3YwANx0HiIiIiIishIiIiIiIyOVIWZ)Gf32T871YwhRIH(kcp)dwCB3YVxlBD8vJyOvgUUn3Ti9LStVRZsY5mjlok2R0hYW5o939L6ThFNEx0HiIiIiIig6Ri88pyXTDl)ETS1xjDBhPVK9zVi9LSlcsqI07lTi5hRUVbg4RV(I0ErXsz8I)zClk2RuVTVGwAhNREx0HiIiIiIig6Ri88pyXTDl)ETS1xj3YwANx0HiIiIylzHoererePdrereXqFfHN)blUv0IdHvXqFfHN)blUv0IdHVAm0kdx3M7wFT87Y1TZKS4OyVsFidN70F3xQ3E8D6fftYIJIPCrhIiIiIH(kcp)dwCROfhAL0TDFT87Y1TZELwYUvhA(3csqgYYsPMueKGC32mydPC9Siib5O1wYMbji91YVlx3kcsqgoR(pUnWDdNTB9UOdrereXqFfHN)blUv0IdTs62(MB17w(HFXV6ZbJoy0b)UPOFJ5Ioerered9veE(hS4wrlo0k5w2s78IoerSLSqhIishIig)(NX4QEVryvmf6qer6qeXqVAmRAkrtDqC5rhIiIiIXV)zmoZhfNvIILKpkwsLO4YmkUucDiIiIig)(NXye5JIrubRI3MKTx9RiBN9so7fr8SsRU3fDiIiIishIiIiIzHWz565aTKH(fA4WZxXDYkIiEwbNjl4Tjz770kPCOqN9QNzl9((YIIZY1ZbAjd9l0WHNVIlChULqhIiIiIiIy87FgJHE)LlAlyvmNIYLCEBs2(45O2zV6z2sVVVSROyViXH1i4h16rUxuSxVl6qererereJF)ZySF1VY5eEJvXCkkxY5Tjz7JNJANfT42)(CSJI3MKTVtRKYHcD2REMT077llkolxphOLm0VqdhE(kUUUII9IehwJGFuRh5ErXE9UOdrerererKoererereXSqyO3F5I2cUd3sOdrerererereN5JIZkyv82KS9QFfz7SxYzO3F5I2YfDiIiIiIiIiI4YeRINNrK)Wm)fbp1iFgrLdZkxe8uVi4NPCJuVOdrerererereZcHltSAvCqChULGR69gHvXv9EJWxnMc2IlA4QEVryvCuwYzQrXuUX5Y8gJzWRO4QEVrxi2swOdrerererSLSqhIiIiIiIiDiIiIiIiIzHW(v)kNt4nUd3sOdrerererereljFuSKkyv82KS9QFfz7SxYz)QFLZj8(IoerererererCPeSkEEgr(dLK)IGNAKpJOYHsQCrWt9IGFMYns9IoererererermleUucwTkoiUd3sWv9EJWQ4OSKZuJIR69gDHT4IgUQ3BewfhLLCMAuCvV3OOyk34CPKBmMbVIIR69gDHylzHoererereXwYcDiIiIi2swOdrerer6qerermleolxphOLm0VI(E1JAj77Kver8ScotwWBtY23Pvs5qHo7vpZw699LffNLRNd0sg6xrFV6rTK9fUd3sOdrerererm(9pJXK5OgwfXCkkxY5Tjz7JNJAN9QNzl9((YUII9IehwJGFuRh5ErXE9UOdrererermleM824SC9CGwYq)kcp)dwCRyTK5O264oClHoererererermI6SK9zV7oeC4WZxbMR66xnEMY1kyp87dtMJA43h2ddplW0HN)blUveflP8gtE4WVx9sbwSF1TLi56DrhIiIiIiIylUOrhIiIiIiIiIig)(NX4mFuCwbRIZY1ZbAjd9Ri88pyXTI1sMJAR)LpkolxphOLm0VIWZ)Gf3kwlzoQT(xf6qerererereX43)mgxMyv88mI8hM5Vi4Pg5ZiQCyw5IGN6fb)mLBK6fIrgtTuOdrerererereZcHltSAvCqChULGR69gHvXv9EJWxnMc2IlA4QEVryvCuwYzQrXuUX5Y8gJzWRO4QEVrxi2swOdrerererSLSqhIiIiITKf6qeXwYcDiIiDiIy87FgJXzjTSL8yvCq6qer6qeXSq4SC9CGwYq)cnC45R4ozfrepRG7WTe6qererm0RgZQMs0uhexE0HiIiIiIig)(NX4mFuCwjkws(OyjvIIlZO4sj0HiIiIiIig)(NXye5JIrubRI3MKTx9RiBN9so7fr8SsRU3fDiIiIiIiI0HiIiIiIiMfcVnjBFNwjLdf6Sx9mBP33xwuCwUEoqlzOFHgo88vCH7WTe6qerererereX4SKw2sESkgNL0YwYJrgtHoerererererKoerererererm(9pJXqV)YfTfSkMtr5soVnjBF8Cu7Sx9mBP33x2vuSxK4WAe8JA9i3lk2R3fDiIiIiIiIiIy87FgJ9R(voNWBSkMtr5soVnjBF8Cu7SOf3(3NJDu82KS9DALuouOZE1ZSLEFFzrXz565aTKH(fA4WZxX11vuSxK4WAe8JA9i3lk2R3fDiIiIiIiIiIiDiIiIiIiIiIywim07VCrBb3HBj0HiIiIiIiIiIiI4mFuCwbRI3MKTx9RiBN9sod9(lx0wUOdrererererereXLjwfppJi)Hz(lcEQr(mIkhMvUi4PErWpt5gPErhIiIiIiIiIi2swOdrererererePdrerererereZcH9R(voNWBChULqhIiIiIiIiIiIiILKpkwsfSkEBs2E1VISD2l5SF1VY5eEFrhIiIiIiIiIiIiIlLGvXZZiYFOK8xe8uJ8zevousLlcEQxe8ZuUrQx0HiIiIiIiIiITKf6qererererer6qerererereXdhwBn6qerererereXSqyO3F5I2cUd3sqerePdrererererereX43)mg)FXV6cSkE)qkT7mWWbDiPtpWWLAql17tVwrlU9VptnkEBs2E44zrXzO3F5I2Y1160HiIiIiIiIiIiIyOVI5kPB7BUvVB5h(f)Qp)FXV6IV6O4)l(vx8Ltu8)f)Ql(kjkMYfDiIiIiIiIiIiIig)(NXy9CjBMGvXrZD4V5EMK65zevWd4SYvu8mI84bCM)6cpG9xBV64zLwDKo)ZsY58IoerererererereJF)Zy8LhRIf)Z4gooUQ3BeooUmXXXrZD4V)xXz9CjBMCHiDiIiIiIiIiIiIig)(NX4Rcwfl(NXnCCCvV3iCCCzIJJJM7WFfzjN1ZLSzYfI0HiIiIiIiIiIiIyOVI5kPB7v)Ys2N9goxh3xUUVxumuuS3W564(Y199IIVkrXdV8x0HiIiIiIiIiIiIyOVI5kPB7(A53NfbRCC83xO3F5I2YfDiIiIiIiIiIiIig6RyUs6WV(DErhIiIiIiIiIi2IlA0HiIiIiIiIiIiIyOVI5k5w2s78Ioerererererered9fNL0wj3YwANx0HiIiIiIiIiITKf6qererererer6qererererer6qerererereXSqy)QFLZj8g3HBj0HiIiIiIiIiIiIy87FgJ)V4xDbwfVFiL2Dgy4GoK0Phy4snOL69PxROf3(3NPgfVnjBpC8SO4SF1VY5eEFDToDiIiIiIiIiIiIig6ROKvs323CRE3Yp8l(vF()IF1fF1rX)x8RU4lNO4)l(vx8vsumLl6qererererererm(9pJX65s2mbRIJM7WFZ9mj1ZZiQGhWsQCffpJipEalj)1fEa7V2E1XZkT6iD(NLKZ5fDiIiIiIiIiIiIig)(NX4lpwfXI)zCdhhx17nchhxkbhhhn3H)(FfN1ZLSzYfI0HiIiIiIiIiIiIy87FgJVkyvel(NXnCCCvV3iCCCPeCCC0Ch(Ril5SEUKntUqKoerererererered9vuYkPB7v)Ys2N9goxh3xUUVxumuuS3W564(Y199IIVkrXdV8x0HiIiIiIiIiIiIyOVIswjDB3xl)(8V(vu891V6x5CcVVOdrererererereXqFfLSs6WV(DErhIiIiIiIiIi2IlA0HiIiIiIiIiIiIyOVIswj3YwANx0HiIiIiIiIiIiIyOV4SK2k5w2s78IoerererererSLSqhIiIiIiIiIiU(60HiIiIiIiIiI0HiIiIiIiIiIzHWqV)YfTfCMSG9R(voNWBCMSGNZ8Cuvljp(QXzfoQQLu5c3HBj0HiIiIiIiIiIiI4HdT87wYcgNL0WsAvEjlyO3F5I2cDiIiIiIiIiIiIiU8Odrerererererererm(9pJX8PGvXZiYFyM)A8Zv9EJUrQx0HiIiIiIiIiIiIiIig)(NXy(uXQ4ze5pus(RXpx17n6gPErhIiIiIiIiIiIiIiIy87FgJvsbRINru5WSY14NR69gDJuVOdrerererererererm(9pJXkPIvXZiQCOKkxJFUQ3B0ns9IoererererererereX43)mgxYJvX8PEiFk0HiIiIiIiIiIiIiIig)(NX4sfSkwj1dvsHoererererererereX43)mgxQXQ4O5o8xrUB9(CjpbpvmY4sfcEQx0HiIiIiIiIiIiIiIiE4q87FgJl1yvC0m)5ypyuC0Ch(Ri3TEFUKNGNkgzCPcbp1Rl6qererererererereJF)Zy8oyveZNY4vsfpG5tD8kPqhIiIiIiIiIiIiIiIiDiIiIiIiIiIiIiIiIXV)zmUXQiEEM6yUi4PEHJJl1e8uXd4Di4PshIiIiIiIiIiIiIiIywiCJJvQIdI7WTe6qerererererererereX43)mgZNcwfpX7m(sf8aUKF8rZD4VIC3695(66gl1e8uPdrerererererererereJF)ZySskyv88WDgFjpEaxQm(O5o8xrUB9(CFDDJLAcEQ0HiIiIiIiIiIiIiIiIiIZ8vXZiYF4mFk34CvV3OBK611fDiIiIiIiIiIiIiIiIiI4Ssv8mIkhoRKYnox17n6gPEDDrhIiIiIiIiIiIiIiIylzHoerererererereBjl0HiIiIiIiIiIiIiDiIiIiIiIiIiIiE4W)l(vthIiIiIiIiIiIiIXV)zmwgRINNrK)Wm)14NLK)Wm)fgz8mIkhMvUg)SKkhMvUUWBGNNLK)Wm)fbpvmY4zjvomRCrWt9IoerererererereJF)ZymILSInwftzq6qererererererKoererererererepCyT1YcHLXJooiUd3sOdrererererererer8ppwfN5Pdrererererererer8VcwfNvOdrererererereXwYcDiIiIiIiIiIiIiMfclJJvWuWD4wcDiIiIiIiIiIiIiIiI)5XQyj5Pdrererererererer8VcwflPcDiIiIiIiIiIiIi2swoCy91r6qererererererKoerererererereZcHLXJEvmfe3HBj0HiIiIiIiIiIiIiIig)(NX4FESkoZJrglp(zj5pmZFrhIiIiIiIiIiIiIiIy87FgJ)vWQ4ScgzS84NLu5WSYfshIiIiIiIiIiIiIiIyelzfBSkwK7wVppJi)H)8xe8uJ8zevo8x5IGN6fDiIiIiIiIiIiIi2swOdrerererererer6qerererererermleg69xUOTGvRI5uuUKZBtY2hph1o7fr8SsRU3vuSxK4WAe8JA9i3lk2R3f(QX(v)kNt4nwTkMtr5soVnjBF8Cu7SxeXZkT6ExrXErIdRrWpQ1JCVOyVEx4oClHoererererererereXqFXzjTI1IZsAzl5xFL0T9n3Q3T8d)IF1NdgnLOPenLl6qererererererSfx0YcHNrSKvSXJoM6xki(QXZLjwTkoiotwWYy1Qyk3yWRle3HBj0HiIiIiIiIiIiIiIig6lolPvSwCwslBj)6RKUTV5w9ULF4x8R(mLOdgDWOPCrhIiIiIiIiIiIiIiIyOVsYzL0T9n3Q3T8d)IF1NFJjk(DKO43rIIF30fDiIiIiIiIiIiIiIiIzHW(RT7lBu78cXXk45SC9CGwYq)INf77oRtWxno4fgzmfChULqhIiIiIiIiIiIiIiIiIiolxphOLm0V4zX(UZ6eSk2FTDFzJANxiDiIiIiIiIiIiIiIiIiI4QJNvs)kNSePzXTZ72MbBiLRNfFR(1Vw9qkxpls)kNSS65o83xVIxYS(7Lto9II9gnl2T6Ex0HiIiIiIiIiIiIiIi2swOdrererererererer8WH1wJoererererererereXSqyYBJZY1ZbAjd9RFZ6K2cUd3sOdrererererererererexD8Ss6x5KLinlUDE32mydPC9S4B1V(1Qhs56zr6x5KLvp3H)(6v8sM1FVCYPxuS3OzXUv37IoerererererererererCwUEoqlzOF9BwN0wWQ4UUCJoererererererereXwYcDiIiIiIiIiIiIiIiIRVoDiIiIiIiIiIiIiIiIho0IlA0HiIiIiIiIiIiIiIiE4aIig6lolPvSw26RKUTV5w9ULF4x8R(CWOPeDWOPCrhIiIiIiIiIiIiIiI4HdZY1ZbAjd9RFZ6K2cwftYIPdrererererereXwYcDiIiIiIiIiIiIishIiIiIiIiIiIiIhoe6lCllNWBSkg6lCllNWB8vJrsbNoererererererepCi0x)Yw2HXQyOV(LTSdJVAmsk40HiIiIiIiIiIiIiDiIiIiIiIiIiIig)(NXy4wwoH3yvS4Fg3WXXv9EJWXXJqhIiIiIiIiIiIiIXV)zm2VSLDySkIf)Z4gooUQ3BeooEEoZFOK8xe8uXiJNZkhkPYfbp1lc(5GFJ5IoererererererePdrererererereXSqy)Yw2HXQvXbXD4wcDiIiIiIiIiIiIiIiIH(IZsAfRfNL0YwYV(k5w2s78IoerererererereBXfnerererer6qerererererererepCyxptkIN7gDiIiIiIiIiIiIiIiIXV)zmokFuCufSkEoZh5sYFDJuJINZkrUKkx3iv6qererererererereJF)ZySEUKntWQ4O5o83Cpts98mIk4bCuLRO4ze5Xd4O8xx4bS)A7vhpR0QJ05FwsoNx0HiIiIiIiIiIiIiIig)(NX4YiSkEEgr(dJYFrWtnYNru5WOkxe8uVi4NPCJuVOdrerererererererm(9pJXxESkIf)Z4gooUQ3BeooUmchhhn3H)(FfN1ZLSzYfI0HiIiIiIiIiIiIiIig)(NX4RcwfXI)zCdhhx17nchhxgHJJJM7WFfzjN1ZLSzYfI0HiIiIiIiIiIiIiIig6lolPvSwCwslBj)6RKUTx9llzF2B4CDCF56(ErXqrXEdNRJ7lx33lk(Qefp8YFrhIiIiIiIiIiIiIiIiDiIiIiIiIiIiIiIiIhou)2ZD2lbNj5e3Odrerererererererm(9pJX65s2mbRIJM7WFZ9mj1ZZzE8aws(RO45ScEalPY1fgzS)A7vhpR0QJ05FwsoNx0HiIiIiIiIiIiIiIiwpxYMjyvSEUKntWibEMkoooAUd)fr2fDiIiIiIiIiIiIiIiIXV)zmotYjUHvX65s2mbJe45O5o8xez4nWuVOdrerererererererKoererererererereX43)mgJBH2rX9lIOyDwoH3rXsE79BewfhmkoyumLOyk0HiIiIiIiIiIiIiIishIiIiIiIiIiIiIiIy87FgJlvWQy)Yw2HXXXrZD4V)xX5mjN42foooAUd)vKLCotYjUDHJJNL8273Od7xex4nWWTSCcVPdrerererererererm(9pJXL8yvmCllNWBCCC0Ch(7)vCotYjUDHJJJM7WFfzjNZKCIBx444zDwoH34bmUfAFH3a7x2YomDiIiIiIiIiIiIiIiIXV)zm(YJvXrZD4V)xX5mjN42foooAUd)9)koNj5e3UWXXZ6SCcVpe3cTVOdrerererererererm(9pJXxfSkoAUd)9)koNj5e3UWXXrZD4V)xX5mjN42fooEwYBVFJoSFrCrhIiIiIiIiIiIiIiIiDiIiIiIiIiIiIiIiIXV)zmM063DZw2HXQy)Yw2HhF0Ch(7)vCotYjUDHrgd3YYj8E8rZD4VISKZzsoXTl6qererererererereJF)ZymP1VCRLLt4nwf7x2Yo84JM7WFfzjNZKCIBxyKXWTSCcVhF0Ch(7)vCotYjUDrhIiIiIiIiIiIiIiIiDiIiIiIiIiIiIiIiIXV)zmEBqZhfVnOvIIbnO5JIbnOvII3EF(O4T3xjkg07Zhfd69vOdrerererererererKoererererererereXSqy9CjBMGhDC0Ch(lIm8gyQ4oClbpCahe5OWXYG0HiIiIiIiIiIiIiIiIiI3g08yvmUfAJhWL8iIiEBqRGvXsE79BeEaFvOdrererererererereredAqZJvX6SCcVXd4lpIig0GwbRIL8273imY4sf6qerererererererereXBVppwfJBH2yKXxEereV9(kyvC)IapGlvOdrerererererererered695XQyDwoH3yKXL8iIyqVVcwf3ViWiJVk0HiIiIiIiIiIiIiIi2IlAzHW65s2mbp64O5o8xez4oClbpCahldICuykJ9G0HiIiIiIiIiIiIiIiIiI3EFESkg3cTXd4sEereV9(kyvSK3E)gHhWxf6qerererererererereXBdAESkwNLt4nEaF5reXBdAfSkwYBVFJWiJlvOdrerererererererered695XQyCl0gJm(YJiIyqVVcwf3ViWd4sf6qerererererererereXGg08yvSolNWBmY4sEermObTcwf3ViWiJVk0HiIiIiIiIiIiIiIiIiIjT(LBTSCcVJIjT(D3SLDySkM063DZw2HJIjT(LBTSCcVPdrerererererererSfx0YcH1ZLSzcE0XJGJJJM7WFrKH3atf3HBj4HdykJ9GihfM6nniDiIiIiIiIiIiIiIiIiIyqVppwfJBH24bCjpIiIb9(kyvSK3E)gHhWxf6qerererererererereXBVppwfRZYj8gpGV8iI4T3xbRIL8273imY4sf6qerererererererereXGg08yvmUfAJrgF5rermObTcwf3ViWd4sf6qerererererererereXBdAESkwNLt4ngzCjpIiEBqRGvX9lcmY4RcDiIiIiIiIiIiIiIiIT4IgE4aM6nniYrHhPugerererererePdrererererererereredAqZJvX4wOnEaxYJiIyqdAfSkwYBVFJWd4RcDiIiIiIiIiIiIiIiIiIyqVppwfRZYj8gpGV8iIyqVVcwfl5T3VryKXLk0HiIiIiIiIiIiIiIiIiI3g08yvmUfAJrgF5rer82GwbRI7xe4bCPcDiIiIiIiIiIiIiIiIiI4T3NhRI1z5eEJrgxYJiI3EFfSkUFrGrgFvOdrererererererereretA9l3Az5eEhftA97Uzl7WyvmP1V7MTSdhftA9l3Az5eEthIiIiIiIiIiIiIiIylzHoerererererererer6qererererererered9fNL0kwlolPLTKF9vs3291Yp87vVCEBqZhfVnOvIIbnO5JIbnOvII3EF(O4T3xjkg07Zhfd69vUOdrerererererererm0xCwsRyT4SKw2s(1xjDBF3SLD4ZKw)UB2Yo8fDiIiIiIiIiIiIiIiIH(IZsAfRfNL0YwYV(kPB7CRLLt49zsRF5wllNW7l6qererererererered9fNL0kwlolPLTKF9vsh(1VZl6qererererererSLSqhIiIiIiIiIi2swOdrerererSLSqhIiIiITKf6qeXwYcDiIiDiIiDiIy87FgJzyvCqerKoerm(9pJXiYhfJOcwfVnjBV6xr2o7LC2lI4zLwDVl6qer6qeXqVAm3JvXuIM6G4YJoerereZcHZY1ZbAjd9l0WHNVI7Kver8ScotwWBtY25kFwXU4Sx9mBP33xU)cNjlyYBJ3MKTlTI70MlN9QNzl9((Y9x4mzbZPOCjN3MKTpEoQD2REMT077l3Fff7fjoSgb)OwpY9II96DHCuvXCkkxY5Tjz7JNJAN9IiEwPv37kk2lsCync(rTEK7ff717c3HBj0HiIiIiIishIiIiIiIy87FgJZ8rXzfSkEBs2E1VISD2l5Sx9mBP33xU)IoererereX43)mgxMyv88mI8hM5Vi4Pg5ZiQCyw5IGN6fb)mLBK6fDiIiIiIiI0HiIiIiIiMfcxM4rhX(FSXBGR69gH7WTe6qerererereX43)mgRNlzZeSkoAUd)n3ZKuppJOcEaNvUIINrKhpGZ8xx4bS)A7vhpR0QJ05FwsoNx0HiIiIiIiIiIXV)zm(YJvXI)zCdhhx17nchhxM444O5o83)R4SEUKntUqKoerererererm(9pJXxfSkw8pJB444QEVr444Yehhhn3H)kYsoRNlzZKlePdrerererereJF)Zy8)f)QlWQ49dP0UZadh0HKo9adxQbTuVp9AfT42)(m1O4Tjz7HJNffN9QNzl9((Y9xxRthIiIiIiIiIishIiIiIiIiIig6lI4zLwDXA5(1xjDBV6xwY(S3W564(Y199IIHII9goxh3xUUVxu8vjkE4L)Ioerererererm0xeXZkT6I1Y9RVs62(MB17w(HFXV6Z)x8RU4Rok()IF1fF5ef)FXV6IVsIIPCrhIiIiIiIiIig6lI4zLwDXA5(1xjD4x)oVOdrerererSLSqhIiIiITKf6qererKoerereZcHZY1ZbAjd9ROVx9OwY(ozfrepRGZKf82KSDUYNvSlo7vpZw699L7VWzYcEBs2(oTskhk0zV6z2sVVVCFuCwUEoqlzOFf99Qh1s2x4oClHoererereXmSkMHrgtHoererereX43)mgtMJAyvmNIYLCEBs2(45O2zV6z2sVVVC)vuSxK4WAe8JA9i3lk2R3fDiIiIiIiI0HiIiIiIishIiIiIiIywim5TXz565aTKH(veE(hS4wXAjZrT1XD4wcDiIiIiIiIiIye1zj7ZE3Di4WHNVcmx11VA8m1RvWE43hMmh1WVpShgEwGPdp)dwCRikws5nM8WHFV6LcSy)QBlrY17IoererereXwCrJoerererererm(9pJXz(O4ScwfNLRNd0sg6xr45FWIBfRLmh1w)lFuCwUEoqlzOFfHN)blUvSwYCuB9Vk0HiIiIiIiIiI0HiIiIiIiIiIXV)zmUmXQ45ze5pmZFrWtnYNru5WSYfbp1lc(zk3i1l6qerererereX43)mgRNlzZeSkoAUd)n3ZKuppJOcEaNvUIINrKhpGZ8xx4bS)A7vhpR0QJ05FwsoNx0HiIiIiIiIiIXV)zm(YJvXI)zCdhhx17nchhxM444O5o83)R4SEUKntUqKoerererererm(9pJXxfSkw8pJB444QEVr444Yehhhn3H)kYsoRNlzZKlePdrerererered9veE(hS4wXAzRVs62E1VSK9zVHZ1X9LR77ffdff7nCUoUVCDFVO4Rsu8Wl)fDiIiIiIiIiIyOVIWZ)Gf32T871YwFL0T9QFzj7ZEdNRJ7lx33lkgkk2B4CDCF56(ErXxLO4Hx(l6qererererer6qerererereXqFfHN)blUvSw26RKUTVB2Yo85ysz8I)zCB8v9EJUOdrerererered9veE(hS4wXAzRVs62o3Az5eEFoMugV4Fg3gFvV3Ol6qererererer6qerererereXqFfHN)blUTB53RLT(kPB7BUvVB5h(f)QptjAkrtj63nDrhIiIiIiIiIiMfctMJAy1QyofLl582KS9XZrTZErepR0Q7Dff7fjoSgb)OwpY9II96DH7WTe6qererererererm0xr45FWIBfRLT(kPB7BUvVB5h(f)Qphm6Gr)UPOFJ5Ioerererererered9veE(hS42ULFVw26RKUTV5w9ULF4x8R(mLOdgDWOPCrhIiIiIiIiIiIiIH(kcp)dwCROfhAL0T9n3Q3T8d)IF1NF3uuCWO43nff)gZfDiIiIiIiIiIiIig6Ri88pyXTIwCOvs32R(LLSp7nCUoUVCDFVOyOOyVHZ1X9LR77ffFvIIhE5VOdrerererererer6qererererererm0xr45FWIBfT4qRKUTVB2Yo8zPKY4f)Z424R69gDrhIiIiIiIiIiIiIH(kcp)dwCROfhAL0TDU1YYj8(Susz8I)zCB8v9EJUOdrererererereXqFfHN)blUv0IdTs6WV(DErhIiIiIiIiIi2IlAzHWLjE0XuhZ3yqChULqhIiIiIiIiIiIiIH(kcp)dwCRyTS1xjDBFZT6Dl)WV4x953nfDWOdg9Bmx0HiIiIiIiIiIT4IgDiIiIiIiIiIiIig6Ri88pyXTI1YwFL0T9n3Q3T8d)IF1NdgDWVBk6Gr)gZfDiIiIiIiIiIylzHoerererererKoerererererm(9pJX)x5KnwfhKoerererererm(9pJX)x5KDQyvCq6qerererereXqVAmyvtjkM6G4YJoerererererereJF)ZymFuScwfVnjBV6xr2o7LC2REMT077lyx0HiIiIiIiIiIiIywim5TXBtY2LwXDAZLZE1ZSLEFFb7cNjl45z(dZ8xe8uXiJNvomRCrWt9IGFMYns9cp6yQJ5Bm4oClHoererererererereXSq4Tjz770kPCOqN9QNzl9((cwuCwUEoqlzOFf99Qh1s2x4oClHoererererererererer8)vozNkwf)FLt2PIrgtHoererererererereXwCrdrerererKoererererererererer8)vozJvX)x5Kngzmf6qererererererereBjl0HiIiIiIiIiIiIylzHoerererererSLSqhIiIiIiIiIishIiIiIiIiIiE4qOVIWZ)Gf32T871YwFL0TDFT87Z)x5Kn(9H9Urp87d)FLt2PErhIiIiIiIiIig6Ri88pyXTDl)ETS1xjDB3xl)(8)vozFrhIiIiIiIiIig6Ri88pyXTDl)ETS1xjD4x)oVOdrerererered9veE(hS4wXAzRVs6WV(DErhIiIiIiIylzHoerereBjl0HiIiIiDiIylzHoerKoerSUTlxNG96rxlzjq6Yj76SCYPvhOVaP)lxSFJcKMo6cSdKE(VZEjfb6lq6I9SEhOVaPxEd8xUy)gfOKaP)lxSFJcKEwUEoqlzOFHE)LlAlyvmjlMUz565aTKH(1V6x5CcVXQyswCG0lVbkELtwcusGDG0HYsYkchOVaPh1kkM50cKoq6)Yf73OaPNLRNd0sg6xO3F5I2cwftYIPBwUEoqlzOF9R(voNWBSkMKfthDruNLSp7LBzlTExbsV8gO4vozjqjbsx8kNSein(xUy)gfi9YBG)Yf73OaLei9YBGrTIIzoTaLeyhiDws2oqFbsV8g4VCX(nkqPhi9F5I9BuG0hoGLws2MUz565aTKH(fA4WZxbwf7V2oDeT44slj07mLXEmdMs)Fr3SC9CGwYq)k67vpQLSXQy)12PJOfhxAjHENPm29)yPu6)l6MLRNd0sg6xOHdpFf3jRiI4zfSkURl3OBwUEoqlzOFf99Qh1s23jRiI4zfSkURl3cSdSdKExNLtoT6a9fi9UseTaP)lxSFJcK(VCX(nAGWzlTaP3zJAlbsxoPn0wYoq6z59lq6)Yf73Ob2vIOfiDBOTKDG0lLRN7SxsG0hzWaPtMJAfb6lWXPei9rBwhm8fc3HB4DZIxcSdK(VCX(nkq6dhW(QZYjNwnDHkN8VZEjNTH2s2rXVVVl6qeX43)mghikwuUK2qBj7O4arXbIIdefhikoquCGO4sRyF8CulkoquCGOyreT44sBbRIFFF0HiI0HiIzHW2qBjBSAvSxUoE4s92J7lx3pq6(gY991d3HBj0HiIiI4SC9CGwYq)kcp)dwCRaRIrsbhPdreBjl0HiI0HiIzHWIiAXXL2cwTkMYy3)PwkJbNjlyr5sAdTLSXQvXEPxDUcAqhy4HKUVbsF7WdNR0P7H7WTe6qererSUTlxNG76Yn6qeXwYcDiIywiSiIwCCPTGvRIPm29)yPu6FChULqhIiIiIzHWIYL0gAlzJvRI9sV6Cf0GoWqU9(HmWqw9QdAPLR70dXD4wcDiIiIiIiIXV)zmMmh1WQyofLl5CPvSpEoQff7fjoSgb)OwpY9II96DrhIiIiIiIy87FgJ5JIvWQ4Tjz7v)kY2zVKZK5O2fDiIiIiIiIZY1ZbAjd9Ri88pyXTI1sMJARJvXiP16LV36vZhfxRxLERxTsWPdrerererSUTlxNG76Yn6qererSLSqhIi2swORLSeiDBOTKDrG0dxQhTsFi9nqql1(BGCDZ564(g42JJ0slO9LR7Z1DII564Hl1BpUVCD)aP7Bi33xG0LlAduojBhO0dSdKEPvm3LRN7wGspq6LSI)62Unq9Bp3zVKahpyG0HBz5eEh44Jm4Gbsx)2ZDlqPhiD8BUeOVaPlx0giPn0wDGscKEpJBj7a9fi9OYX7Sa9fyhyhiDl5)voz3QZwcKoLBASmwcKUCrBGwY)RCYUvNTeO0dKEjluOS)YX7kb6lq6rLJ3zb6lq6Kx9OzCGspq6)WZ44wsoTaLEG0HB1VS)aLEG0XHQdu6bsN8sAbk9a7a7aPlx0gyvVKwPTeOKaPlx0gyvVKwGscKU(f3c0xG0JkhVZc0xGDGDG01Z)wG(cKEu54DwG(cSdSdKEvVKwG0b2bsh6LStNTQwGJtjLaPxYkIiEwj9E(hSIaPJe)bspkRU(vhOKaPRF75o7Le44bdKUULt2lPVkr0cKo7)Lei9)7fV86xsGscKUK4wYYr7T0cKU0dAUo(obsptYgn3zVKa9fi9OzwsG(cK()f)QVpWXPei9s565o7LeiDkdoyG0Z4icp7RseTaPl21ZSCcVdK()f)QhsGJtjq6)x8RU)cCCkbspJJi8mslN8hinIiw32LRtWqLt(3zVKZiQF5u3kkIIf7z9okU0I3Zl6qereRB7Y1jyXEwVXiJNru)YPUvuGJJlT498IoerSLSqhIbsxUOnWUEMuep3TaLEG0LlAdmJJi8mqjbsVRNjfXZDlslN8hiDDBxUobdvo5FN9soJO(LtDROikwSN17X6OyXEwVJKffxAX75yDuCPfVNrYUOdrepCi3AXXp8UV64f6qeX62UCDcwSN17XAmY4ze1VCQBff444slEphRVIIf7z9osggz8mI6xo1TIcCCCPfVNrYUORLSqhD0fiDX)mUvjWXPei9moIWZahpyG0vcC8GbsNpWXdgi9)l(vx6booLaP31ZKI45U1xLiAbs)xUy)gfiD9Bp3TahpyG0f)Z4w(ahNsGDG0HYsYkchOVaPlx0gyxptkIN7wGscKExptkIN7wFvIOfi9Fw9FClWoWoq6LwXFG0dPTdxP4WWXTxswXyv5kUCsdrerererererererererererehUUTKTlW9dx9BVh9fiDws2EG)3OiIB72sGJtjq6z59lqjbsVB53LRBbsJbsN7lxSZcvjq6GMRiTVaPtkpQV6SCYPvxe44ucKEUSKTZEjZ4b21z5KtRUiqFb2bsxPudfQOTdePJzShCm9FQP2)LYyFKXYyjLbhmqOd9F)hiD)Yw2HdC8rgCWaP)FXV6a9f44ucePJzmJ9GJLJKYrgm1XYrUPXmMBkqOdJ5iboo1ar6ygtkdM6yxkLYGPowgCWJCtPgi0HXCKahFKahp4xPCKXsQPmMszSlLuVP(FmPe44(pWXdgyhiD2sG039DNbUFMTmqUfPdpWqQ)dNn6LS0g4(5YSoq6LSIiINvkT)xsG0LwYUvhA(3csP9)skcs6iAXXdePz1TbI0wCKgph1UpljNaPl2Z)GvS6xwYoq6HZ1X9LR7dKE3YVh(f)Qd0xGJtjqKwkPm2P0)PKsQJ5iPoMJukPwkbcDymhjWXPgislLug7u6)usj1XCKuhZrkLulLaHomMJe44JeislLug7u6)usj1XCKuhZrkLulLaHomMJe44(pqKoMulLJK6rkLXCK()i30GhzWXoqOdJ5ib2b2bsxeiDQFP8n4xk9FG0dnWXP0)PMsGDGaa


--[[
Author : Pottm
Edited : By Aethys & Cleonis for Quichons@Elune
Version : 1.1 (10.01.2015)
Readme :
	WeakAura from Pottm wich display both Chaos lines and Torment circles, you can choose if you want to 
	display or not them by changing the fChaosDisplay and sTormentDisplay variables in Init (Actions tab) 
	to either true or false.
]]--


--- Actions\On Init\Custom ---

-- Init
aura_env.fChaos = GetSpellInfo(185014)
aura_env.sTorment = GetSpellInfo(184964)
aura_env.fChaosDisplay = true
aura_env.sTormentDisplay = true


--- Trigger\Custom Trigger ---

-- Trigger [...events_to_trigger_toadd...]
function(event, ...)
    local _, subevent, _, _, _, _, _, _, destName, _, _, spellId = ...
    
    if event == "ENCOUNTER_START" then
        aura_env.shackles = {} 
    end
    
    if spellId == 184265 and subevent == "SPELL_CAST_SUCCESS" then
        return true
    end
    if spellId == 184964 then
        if subevent == "SPELL_AURA_APPLIED"  then
            local name = gsub(destName, "%-[^|]+", "")
            local x, y = UnitPosition(name)
            aura_env.shackles[name] = {["x"]=x, ["y"]=y}
            return true
        end
    end
end


--- Display\Custom Function ---

-- Refresh
function()
    local f = WeakAuras["regions"][aura_env.id]["region"]
    f:SetWidth(max(f:GetWidth(), f:GetHeight()))
    f:SetHeight(f:GetWidth())
    local scale = f:GetWidth()/100
    
    f.bg = f.bg or f:CreateTexture(nil, "BACKGROUND", nil, 0)
    f.bg:SetTexture("Interface\\AddOns\\WeakAuras\\Media\\Textures\\Circle_White_Border")
    f.bg:SetAllPoints(f)
    f.bg:SetVertexColor(.3, .3, .3, .7)
    
    f.player = f.player or  f:CreateTexture(nil, "BACKGROUND", nil, 4)
    f.player:SetTexture("Interface\\Addons\\WeakAuras\\PowerAurasMedia\\Auras\\Aura118")
    f.player:SetPoint("CENTER", f, "CENTER", 0, 0)
    f.player:SetWidth(10*scale)
    f.player:SetHeight(10*scale)
    
    if aura_env.fChaosDisplay then
        f.players = f.players or {}
        f.lines = f.lines or {}
        
        for i=1,20 do
            f.lines[i] = f.lines[i] or  f:CreateTexture(nil,"BACKGROUND", nil, 2)
            f.lines[i]:SetTexture("Interface\\AddOns\\WeakAuras\\Media\\Textures\\Square_White")
            f.lines[i]:SetVertexColor(0,1,0,1)
            f.lines[i]:Hide()        
            
            f.players[i] = f.players[i] or f:CreateTexture(nil, "BACKGROUND", nil, 3)
            f.players[i]:SetTexture("Interface\\AddOns\\WeakAuras\\Media\\Textures\\Circle_Smooth_Border")
            f.players[i]:SetWidth(4*scale)
            f.players[i]:SetHeight(4*scale)
            f.players[i]:Hide()
        end
    end
    
    if aura_env.sTormentDisplay then
        f.shackles = f.shackles or {}
        f.shackletext = f.shackletext or {}
        
        for i=1,3 do
            f.shackles[i] = f.shackles[i] or f:CreateTexture(nil, "BACKGROUND", nil, 2)
            f.shackles[i]:SetTexture("Interface\\AddOns\\WeakAuras\\Media\\Textures\\Circle_White")
            f.shackles[i]:SetVertexColor(0,0,0.7,.5)
            f.shackles[i]:Hide()
            
            f.shackletext[i] = f.shackletext[i] or  f:CreateFontString(nil, "BACKGROUND")
            f.shackletext[i]:SetFont("Fonts\\FRIZQT__.TTF", 6*scale, "OUTLINE")
            f.shackletext[i]:Hide()
        end
        
        f.shackleself = f.shackleself or f:CreateTexture(nil, "BACKGROUND", nil, 1)
        f.shackleself:SetTexture("Interface\\AddOns\\WeakAuras\\Media\\Textures\\Circle_White")
        f.shackleself:SetVertexColor(0,0,0.7,.5)
        f.shackleself:Hide()
    end
    
    local zoom = 1
    
    for i=1,20 do
        local ax, ay, bx, by, da, db
        local px, py = UnitPosition("player")
        
        if aura_env.fChaosDisplay and UnitDebuff("raid"..i, aura_env.fChaos) then
            local focused = gsub(UnitName("raid"..i), "%-[^|]+", "")
            local wrought = gsub(UnitName(select(8, UnitDebuff("raid"..i, aura_env.fChaos))), "%-[^|]+", "")
            
            if focused then
                ax, ay = UnitPosition(focused)
                da = ((px-ax)^2+(py-ay)^2)^(1/2)
                if da == 0 then zoom = zoom or 1 else zoom = min(2, 1/(da/50), zoom)  end
            end
            
            if wrought then
                bx, by = UnitPosition(wrought)
                db = ((px-bx)^2+(py-by)^2)^(1/2)
                if db == 0 then zoom = min(2, zoom) else zoom = min(2, zoom, 1/(db/50), zoom)  end
            end
        end
        
        if aura_env.sTormentDisplay and UnitDebuff("raid"..i, aura_env.sTorment) then
            local name =  gsub(UnitName("raid"..i), "%-[^|]+", "")
            if not aura_env.shackles[name] then
                print("WA Chaos Error (1): " .. name .. " has Shackles, but no Coords stored!")
            else
                local ax, ay = aura_env.shackles[name].x, aura_env.shackles[name].y
                local da = ((px-ax)^2+(py-ay)^2)^(1/2)  + 26
                if da == 0 then zoom = zoom or 1 else zoom = min(2, 1/(da/50), zoom)  end
            end
        end
    end
    
    local lineidx = 0
    
    if aura_env.fChaosDisplay then
        for i=1,20 do
            local ax, ay, bx, by, da, db
            local px, py = UnitPosition("player")
            
            if UnitDebuff("raid"..i, aura_env.fChaos) then
                lineidx = lineidx + 1
                
                local focused = gsub(UnitName("raid"..i), "%-[^|]+", "")
                local wrought = gsub(UnitName(select(8, UnitDebuff("raid"..i, aura_env.fChaos))), "%-[^|]+", "")
                
                if focused then
                    ax, ay = UnitPosition(focused)
                    da = ((px-ax)^2+(py-ay)^2)^(1/2)
                end
                
                if wrought then
                    bx, by = UnitPosition(wrought)
                    db = ((px-bx)^2+(py-by)^2)^(1/2)
                end
                
                --[[
                if focused then      
                    local colors = RAID_CLASS_COLORS[select(2, UnitClass(focused))]
                    f.sa:SetVertexColor(colors.r, colors.g, colors.b, 1)
                    local radian = math.atan2((py - ay), (px - ax)) - GetPlayerFacing()
                    local ox = scale * zoom * da * math.cos(radian)  
                    local oy = scale * zoom * da * math.sin(radian)  
                    f.sa:SetPoint("CENTER", f, "CENTER", oy, -ox)
                    f.sa:SetText(skull..focused)
                    f.sa:Show()
                else
                    f.sa:Hide()
                    f.line:Hide()
                end
                
                
                if wrought then
                    local colors = RAID_CLASS_COLORS[select(2, UnitClass(wrought))]
                    f.sb:SetVertexColor(colors.r, colors.g, colors.b, 1)
                    local radian = math.atan2((py - by), (px - bx)) - GetPlayerFacing()
                    local ox =  scale * zoom * db * math.cos(radian)  
                    local oy =  scale * zoom * db * math.sin(radian)  
                    f.sb:SetPoint("CENTER", f, "CENTER", oy, -ox)
                    f.sb:SetText(cross..wrought)
                    f.sb:Show()
                else
                    f.sb:Hide()
                    f.line:Hide()
                end
                ]]
                
                if focused and wrought and (ax~=bx or ay~=by) then
                    --extend line beyond focused
                    do
                        local x1 = (px-ax)*(zoom/2)
                        local x2 = (px-bx)*(zoom/2)
                        local y1 = (py-ay)*(zoom/2)
                        local y2 = (py-by)*(zoom/2)
                        local dx = x2-x1
                        local dy = y2-y1
                        local dr = math.sqrt(dx^2 + dy^2)
                        --local dr = max(80, math.sqrt(dx^2 + dy^2))
                        local D =  x1*y2 - x2*y1
                        
                        local t =  ((25)^2) * dr^2 - D^2
                        if t >= 0 then
                            local x1 = ( D*dy - dx*math.sqrt(t))/dr^2
                            local y1 = (-D*dx - dy*math.sqrt(t))/dr^2
                            ax= (px-(x1/(zoom/2)))
                            ay= (py-(y1/(zoom/2)))
                        end
                    end
                    
                    --color
                    local u = ((px-ax)*(bx-ax) + (py-ay)*(by-ay)) / ((bx-ax)^2 + (by-ay)^2)
                    local pdist = 10
                    
                    --[[if u < 0 then
                        cx = ax
                        cy = ay
                    end
                    if u > 1 then
                        cx = bx
                        cy = by
                    end--]] 
                    
                    if u <= 1  then
                        local cx = ax + u*(bx-ax)
                        local cy = ay + u*(by-ay) 
                        pdist = sqrt((px-cx)^2+(py-cy)^2)
                    end
                    
                    if focused == gsub(UnitName("player"), "%-[^|]+", "") or wrought == gsub(UnitName("player"), "%-[^|]+", "") then
                        f.lines[lineidx]:SetVertexColor(0,1,1,1)
                    elseif (pdist < 2.1  or (da == 0 and u == 1/0))  then
                        f.lines[lineidx]:SetVertexColor(1,0,0,1)
                        f.bg:SetVertexColor(.5, .3, .3, .7)
                        if GetTime()  > (aura_env.lastWarn or 0) + 1 then
                            aura_env.lastWarn = GetTime() 
                            PlaySoundFile(WeakAuras.PowerAurasSoundPath.."sonar.ogg", "master")
                        end
                        --[[
                        if not aura_env.warned then
                            PlaySoundFile(WeakAuras.PowerAurasSoundPath.."sonar.ogg", "master")
                            aura_env.warned = true
                        end
                        ]]
                        --else
                        --    f.lines[i]:SetVertexColor(0,1,0,1)
                        --aura_env.warned = nil
                    end
                    
                    --f.height = f.height or {}
                    --f.width = f.width or {}
                    
                    local height = scale * zoom * 3
                    local width =  scale * zoom * ((ax-bx)^2 + (ay-by)^2)^(0.5)
                    
                    if width == 0 then
                        f.lines[lineidx]:Hide()
                    else            
                        --translate
                        local mx, my = (ax+bx)/2, (ay+by)/2
                        local radian = math.atan2((py - my), (px - mx)) - GetPlayerFacing()
                        local dm = ((px-mx)^2+(py-my)^2)^(1/2)
                        local ox =  scale * zoom * dm * math.cos(radian)  
                        local oy =  scale * zoom * dm * math.sin(radian)  
                        f.lines[lineidx]:SetPoint("CENTER", f, "CENTER", oy, -ox)
                        
                        --rotation angle
                        local radian = math.atan2((ax - bx), (ay - by)) + GetPlayerFacing()
                        radian = radian % (2 * math.pi)
                        local angle = radian % (math.pi / 2)
                        
                        local left, top, right, bottom = 0, 0, 1, 1
                        
                        local dy = width * math.cos(angle) * math.sin(angle) * (bottom-top) / height
                        local dx = height * math.cos(angle) * math.sin(angle) * (right - left) / width
                        local ox = math.cos(angle) * math.cos(angle) * (right-left)
                        local oy = math.cos(angle) * math.cos(angle) * (bottom-top)
                        
                        local newWidth = width*math.cos(angle) + height*math.sin(angle)
                        local newHeight = width*math.sin(angle) + height*math.cos(angle)
                        
                        local ULx, ULy, LLx, LLy, URx, URy, LRx, LRy
                        
                        if radian < math.pi / 2 then -- 0 ~ 90
                            ULx = left - dx     ULy = bottom - oy
                            LLx = right - ox    LLy = bottom + dy
                            URx = left + ox     URy = top - dy
                            LRx = right + dx    LRy = top + oy
                        elseif radian < math.pi then -- 90 ~ 180
                            URx = left - dx     URy = bottom - oy
                            ULx = right - ox    ULy = bottom + dy
                            LRx = left + ox     LRy = top - dy
                            LLx = right + dx    LLy = top + oy
                            newHeight, newWidth = newWidth, newHeight
                        elseif radian < 3 * math.pi / 2 then -- 180 ~ 270
                            LRx = left - dx     LRy = bottom - oy
                            URx = right - ox    URy = bottom + dy
                            LLx = left + ox     LLy = top - dy
                            ULx = right + dx    ULy = top + oy
                        else -- 270 ~ 360                
                            LLx = left - dx     LLy = bottom - oy
                            LRx = right - ox    LRy = bottom + dy
                            ULx = left + ox     ULy = top - dy
                            URx = right + dx    URy = top + oy
                            newHeight, newWidth = newWidth, newHeight
                        end
                        
                        f.lines[lineidx]:SetTexCoord(ULx, ULy, LLx, LLy, URx, URy, LRx, LRy)
                        f.lines[lineidx]:SetWidth(newWidth)
                        f.lines[lineidx]:SetHeight(newHeight)
                        f.lines[lineidx]:Show()
                    end
                end
            end
        end
    end
    
    
    local i = 0    
    local px, py = UnitPosition("player")
    
    for j = 1,20 do
        if aura_env.fChaosDisplay and UnitExists("raid"..j) and not UnitIsDead("raid"..j) and gsub(UnitName("raid"..j), "%-[^|]+", "") ~= gsub(UnitName("player"), "%-[^|]+", "") then
            
            local ax, ay = UnitPosition("raid"..j)
            local da = ((px-ax)^2+(py-ay)^2)^(1/2)
            
            if da <  48 / zoom then
                local radian = math.atan2((py - ay), (px - ax)) - GetPlayerFacing()
                local ox = scale * zoom * da * math.cos(radian)  
                local oy = scale * zoom * da * math.sin(radian)  
                local colors = RAID_CLASS_COLORS[select(2, UnitClass("raid"..j))]
                
                f.players[j]:SetPoint("CENTER", f, "CENTER", oy, -ox)
                f.players[j]:SetVertexColor(colors.r, colors.g, colors.b, 1)
                f.players[j]:Show()
            end
        end
        
        if aura_env.sTormentDisplay and UnitExists("raid"..j) and UnitDebuff("raid"..j, aura_env.sTorment) then
            i = i + 1
            local name = gsub(UnitName("raid"..j), "%-[^|]+", "")
            
            
            if not aura_env.shackles[name] then
                print("WA Chaos Error (2): " .. name .. " has Shackles, but no Coords stored!")
            else
                local ax, ay = aura_env.shackles[name].x, aura_env.shackles[name].y
                
                local da = ((px-ax)^2+(py-ay)^2)^(1/2)
                local radian = math.atan2((py - ay), (px - ax)) - GetPlayerFacing()
                local ox = scale * zoom * da * math.cos(radian)  
                local oy = scale * zoom * da * math.sin(radian)  
                f.shackles[i]:SetPoint("CENTER", f, "CENTER", oy, -ox)
                f.shackletext[i]:SetPoint("CENTER", f, "CENTER", oy, -ox)
                
                f.shackles[i]:SetWidth(51*scale*zoom)
                f.shackles[i]:SetHeight(51*scale*zoom)
                
                f.shackletext[i]:SetVertexColor(1,1,1,.7)
                if name == gsub(UnitName("player"), "%-[^|]+", "") then
                    f.shackles[i]:SetVertexColor(0,0,.7,.5)
                    f.shackletext[i]:SetVertexColor(1,0,0,1)
                    f.shackleself:SetVertexColor(.7, 0, .7, .5)
                    f.shackleself:SetPoint("CENTER", f, "CENTER", oy, -ox)
                    
                    f.shackleself:SetWidth(61*scale*zoom)
                    f.shackleself:SetHeight(61*scale*zoom)
                    f.shackleself:Show()
                elseif da < 25.5  then
                    f.shackles[i]:SetVertexColor(.7,0,0,.5)
                else
                    f.shackles[i]:SetVertexColor(0,0.7,0,.5)
                end
                
                local count = 0
                local count2 = 0
                for k=1, 20 do
                    local x, y = UnitPosition("raid"..k)
                    if not UnitIsDead("raid"..k) and ((x-ax)^2 + (y-ay)^2)^(1/2) < 25.5 then
                        if UnitDebuff("raid"..k, aura_env.sTorment) then
                            count2 = count2 + 1
                        else            
                            count = count + 1
                        end
                    end
                end
                
                --f.shackletext[i]:SetText(count .. "/" .. count2)
                f.shackletext[i]:SetText(count)
                f.shackletext[i]:Show()
                f.shackles[i]:Show()
            end
        end
        
    end
    
    return ""
end

--
